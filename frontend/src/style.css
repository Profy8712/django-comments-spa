html { scroll-behavior: smooth; }

/* frontend/src/style.css
   =========================================================
   Theme system:
   - Dark: glassy allowed
   - Light: solid (no fog)
   ========================================================= */

:root {
  --bg: #1f2f46;

  --text: #f5f8ff;
  --muted: rgba(245, 248, 255, 0.75);

  --border: rgba(255, 255, 255, 0.22);
  --border-strong: rgba(255, 255, 255, 0.32);

  --surface: rgba(0, 0, 0, 0.20);
  --surface-2: rgba(15, 23, 42, 0.70);
  --surface-3: rgba(17, 28, 51, 0.80);

  --input-bg: rgba(15, 23, 42, 0.85);

  --primary: rgba(96, 165, 250, 1);
  --danger: #ff5a78;
  --success: rgba(120, 255, 170, 0.9);

  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html[data-theme="light"] {
  --bg: #f3f6fb;

  --text: #0f172a;
  --muted: rgba(15, 23, 42, 0.62);

  --border: rgba(15, 23, 42, 0.14);
  --border-strong: rgba(15, 23, 42, 0.26);

  --surface: #ffffff;
  --surface-2: #ffffff;
  --surface-3: #ffffff;

  --input-bg: #ffffff;

  --primary: #2563eb;
  --danger: #e11d48;
  --success: #16a34a;
}

* { box-sizing: border-box; }

html, body { height: 100%; margin: 0; }

/* ✅ scroll safety */

body {
  background: var(--bg);
  color: var(--text);
}

#app { width: 100%; }

h1, h2, h3 { font-weight: 900; margin: 0; }

a { color: var(--text); text-decoration: underline; }

.muted { color: var(--muted); }

input, textarea, select {
  background: rgba(255, 255, 255, 0.10);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 10px 12px;
}

html[data-theme="light"] input,
html[data-theme="light"] textarea,
html[data-theme="light"] select {
  background: var(--input-bg);
}

textarea { resize: vertical; }

input::placeholder, textarea::placeholder { color: var(--muted); }

input:focus, textarea:focus, select:focus {
  outline: none;
  border-color: var(--border-strong);
}

button {
  background: rgba(255, 255, 255, 0.16);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 16px;
  font-weight: 700;
  cursor: pointer;
}

button:hover { background: rgba(255, 255, 255, 0.22); }
button:disabled { opacity: 0.55; cursor: not-allowed; }

html[data-theme="light"] button { background: #ffffff; }
html[data-theme="light"] button:hover { background: #f1f5ff; }

code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.95em;
}

/* Select options */
.controls select option { background: #0f1b2d; color: #f5f8ff; }
.controls select option:checked { background: #1f2f46; color: #f5f8ff; }

html[data-theme="light"] .controls select option { background: #ffffff; color: #0f172a; }
html[data-theme="light"] .controls select option:checked { background: #e8eefc; color: #0f172a; }

/* =========================================================
   Extra safe UI utilities
   ========================================================= */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
}

.divider {
  border-top: 1px solid var(--border);
}

/* old ghost (can stay, but we won’t use it in CommentTree) */
.btn-ghost {
  border: 1px solid transparent;
  background: transparent;
  color: var(--primary);
  font-weight: 800;
  padding: 6px 10px;
  border-radius: 12px;
}
.btn-ghost:hover {
  background: rgba(37, 99, 235, 0.08);
  border-color: rgba(37, 99, 235, 0.18);
}

/* ✅ calm forum-like action buttons */
.btn-link {
  background: transparent !important;
  border: 1px solid transparent !important;

  padding: 4px 8px;
  border-radius: 10px;

  font-weight: 700;
  font-size: 0.92rem;

  /* light theme: subtle */
  color: rgba(15, 23, 42, 0.55);
}

/* dark theme */
html:not([data-theme="light"]) .btn-link {
  color: rgba(245, 248, 255, 0.72);
}

.btn-link:hover {
  background: rgba(15, 23, 42, 0.03) !important;
  border-color: rgba(15, 23, 42, 0.08) !important;
}

html:not([data-theme="light"]) .btn-link:hover {
  background: rgba(255, 255, 255, 0.06) !important;
  border-color: rgba(255, 255, 255, 0.14) !important;
}

.btn-link-danger {
  color: rgba(225, 29, 72, 0.78);
}

.btn-link-danger:hover {
  background: rgba(225, 29, 72, 0.06) !important;
  border-color: rgba(225, 29, 72, 0.16) !important;
}

/* ensure page scroll works */
html, body { height: auto; }
body { overflow-y: auto; }

/* flash highlight (used by App.vue scrollToComment) */
.comment-item { transition: box-shadow 220ms ease, transform 220ms ease, border-color 220ms ease; }

.comment-item.flash-highlight {
  border-color: rgba(59, 130, 246, 0.55) !important;
  box-shadow:
    0 0 0 3px rgba(59, 130, 246, 0.22),
    0 12px 28px rgba(15, 23, 42, 0.16) !important;
  transform: translateY(-1px);
}

html:not([data-theme="light"]) .comment-item.flash-highlight {
  border-color: rgba(96, 165, 250, 0.55) !important;
  box-shadow:
    0 0 0 3px rgba(96, 165, 250, 0.22),
    0 12px 28px rgba(0, 0, 0, 0.45) !important;
}


/* =========================================================
   SOLID PATCH (UI polish)
   - stricter radius & shadows
   - denser spacing
   - better comment header/actions
   - cleaner nesting
   ========================================================= */

:root {
  --radius-lg: 12px;
  --radius-md: 10px;
  --radius-sm: 8px;

  --shadow-soft: 0 6px 16px rgba(0, 0, 0, 0.10);
  --shadow-soft-light: 0 6px 16px rgba(15, 23, 42, 0.10);
}

/* 1) Global inputs/buttons: slightly stricter radius */
input, textarea, select { border-radius: var(--radius-lg); }
button { border-radius: var(--radius-lg); }

/* 2) Cards/sections: calmer shadow + a bit denser */
.card,
.section,
.comment-form,
.comment-item {
  border-radius: var(--radius-lg) !important;
  box-shadow: var(--shadow-soft) !important;
}

html[data-theme="light"] .card,
html[data-theme="light"] .section,
html[data-theme="light"] .comment-form,
html[data-theme="light"] .comment-item {
  box-shadow: var(--shadow-soft-light) !important;
}

/* 3) Typography: more product-like */
.brand .title {
  font-size: 26px;
  letter-spacing: 0.1px;
}

.section h2 {
  font-size: 17px;
}

.muted {
  color: var(--muted);
}

/* 4) Actions (Reply/Delete): pill buttons */
.btn-link,
.btn-link-danger {
  border-radius: var(--radius-sm) !important;
  padding: 4px 10px !important;
  font-size: 0.86rem !important;
  line-height: 1.2 !important;
  border: 1px solid transparent !important;
}

.btn-link:hover {
  background: rgba(37, 99, 235, 0.06) !important;
  border-color: rgba(37, 99, 235, 0.14) !important;
}

html:not([data-theme="light"]) .btn-link:hover {
  background: rgba(255, 255, 255, 0.06) !important;
  border-color: rgba(255, 255, 255, 0.14) !important;
}

.btn-link-danger {
  color: rgba(225, 29, 72, 0.82) !important;
}

.btn-link-danger:hover {
  background: rgba(225, 29, 72, 0.06) !important;
  border-color: rgba(225, 29, 72, 0.16) !important;
}

/* 5) Comment header layout + actions alignment (works if classes exist) */
.comment-head {
  display: grid !important;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  align-items: center;
}

.comment-author {
  font-weight: 800;
  font-size: 14px;
}

.comment-meta {
  font-size: 12px;
  color: var(--muted);
}

.comment-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: flex-end;
}

/* 6) Nesting: cleaner, less bulky */
.comment-children {
  margin-left: 18px !important;
  padding-left: 12px !important;
  border-left: 2px solid rgba(37, 99, 235, 0.12);
}

html:not([data-theme="light"]) .comment-children {
  border-left-color: rgba(96, 165, 250, 0.18);
}

/* Slightly denser inner paddings if these classes exist */
.comment-item,
.section,
.comment-form {
  padding: 12px !important;
}


/* === SOLID ACTION PILLS (visible) === */
html[data-theme="light"] .btn-link {
  border: 1px solid rgba(37, 99, 235, 0.18) !important;
  background: rgba(37, 99, 235, 0.06) !important;
  color: rgba(37, 99, 235, 0.92) !important;
}

html[data-theme="light"] .btn-link-danger {
  border: 1px solid rgba(225, 29, 72, 0.22) !important;
  background: rgba(225, 29, 72, 0.06) !important;
  color: rgba(225, 29, 72, 0.92) !important;
}

html[data-theme="light"] .btn-link:hover {
  background: rgba(37, 99, 235, 0.10) !important;
}

html[data-theme="light"] .btn-link-danger:hover {
  background: rgba(225, 29, 72, 0.10) !important;
}


/* =========================================================
   RESTORE OUTLINE PILL ACTIONS (blue Reply / red Delete)
   ========================================================= */

/* Reply */
.btn-link {
  background: rgba(37, 99, 235, 0.06) !important;
  border: 1px solid rgba(37, 99, 235, 0.35) !important;
  color: rgba(37, 99, 235, 0.95) !important;
  border-radius: 999px !important;
  padding: 6px 14px !important;
  font-weight: 700;
}

.btn-link:hover {
  background: rgba(37, 99, 235, 0.12) !important;
}

/* Delete */
.btn-link-danger {
  background: rgba(225, 29, 72, 0.06) !important;
  border: 1px solid rgba(225, 29, 72, 0.35) !important;
  color: rgba(225, 29, 72, 0.95) !important;
  border-radius: 999px !important;
  padding: 6px 14px !important;
  font-weight: 700;
}

.btn-link-danger:hover {
  background: rgba(225, 29, 72, 0.12) !important;
}


/* =========================================================
   CALM ACTION BUTTONS (revert bright pills to subtle links)
   ========================================================= */

/* neutralize any previous pill styles */
.btn-link,
.btn-link-danger {
  background: transparent !important;
  border: 1px solid transparent !important;
  border-radius: 10px !important;
  padding: 4px 8px !important;
  font-weight: 700;
}

/* light theme: calm */
html[data-theme="light"] .btn-link {
  color: rgba(15, 23, 42, 0.55) !important;
}
html[data-theme="light"] .btn-link-danger {
  color: rgba(15, 23, 42, 0.55) !important; /* same calm color as Reply */
}

/* dark theme: calm */
html:not([data-theme="light"]) .btn-link {
  color: rgba(245, 248, 255, 0.72) !important;
}
html:not([data-theme="light"]) .btn-link-danger {
  color: rgba(245, 248, 255, 0.72) !important; /* same calm color as Reply */
}

/* subtle hover only */
.btn-link:hover,
.btn-link-danger:hover {
  background: rgba(15, 23, 42, 0.03) !important;
  border-color: rgba(15, 23, 42, 0.08) !important;
}

html:not([data-theme="light"]) .btn-link:hover,
html:not([data-theme="light"]) .btn-link-danger:hover {
  background: rgba(255, 255, 255, 0.06) !important;
  border-color: rgba(255, 255, 255, 0.14) !important;
}


/* --- Dark theme: slightly brighter textarea placeholder (UX polish) --- */
html:not([data-theme="light"]) textarea::placeholder {
  color: rgba(245, 248, 255, 0.68);
}

/* =========================================================
   Thread readability polish (forum-like nesting)
   ========================================================= */

/* Lighter nested comment cards */
.children .comment-item {
  background: rgba(15, 23, 42, 0.015);
  border-color: rgba(15, 23, 42, 0.10);
}

html:not([data-theme="light"]) .children .comment-item {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.12);
}

/* Clean indentation line */
.children {
  margin-top: 12px;
  padding-left: 18px;
  border-left: 2px solid rgba(148, 163, 184, 0.35);
}

html:not([data-theme="light"]) .children {
  border-left-color: rgba(255, 255, 255, 0.12);
}

/* Compact header for nested comments */
.children .comment-head {
  padding-top: 8px;
  padding-bottom: 8px;
}

.children .avatar {
  width: 30px;
  height: 30px;
}


/* ===============================
   Comment form UI optimization
   =============================== */

.comment-form {
  max-width: 860px;
  margin: 0 auto;
}

.comment-form .section {
  margin-bottom: 16px;
}

/* Toolbar */
.comment-toolbar {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

.comment-toolbar button {
  padding: 4px 10px;
  font-size: 13px;
  border-radius: 6px;
}

/* Textarea */
.comment-textarea {
  min-height: 120px;
  resize: vertical;
  font-size: 14px;
  line-height: 1.45;
}

/* Attachments */
.attachments-dropzone {
  padding: 12px;
  min-height: 64px;
  border-radius: 10px;
}

.attachments-hint {
  font-size: 12px;
  color: #6b7280;
  margin-top: 4px;
}

/* Submit */
.comment-submit {
  padding: 10px 20px;
  font-weight: 500;
}

.comment-submit:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}


/* --- Compact User Information block --- */
.user-info {
  padding: 16px 18px;
}

.user-info .form-row {
  gap: 12px;
}

.user-info .form-group {
  margin-bottom: 10px;
}

.user-info input {
  padding: 10px 12px;
}


/* --- Compact comment toolbar --- */
.comment-toolbar .tool {
  padding: 4px 10px;
  min-width: auto;
  font-size: 13px;
}


/* --- Telegram-like composer for CommentForm --- */
.comment-form .composer {
  position: sticky;
  bottom: 12px;
  z-index: 60;
  margin-top: 10px;
  padding: 10px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--surface-2, var(--card, rgba(255,255,255,0.03)));
  box-shadow: 0 10px 26px rgba(0, 0, 0, 0.14);
}

/* Actions row: compact, send on the right */
.comment-form .composer .form-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  margin: 0;
}

/* Primary send button: more "chat" sized */
.comment-form .composer .btn.primary {
  padding: 10px 16px;
  border-radius: 999px;
  min-height: 40px;
}

/* Secondary cancel: smaller */
.comment-form .composer .btn.ghost {
  padding: 8px 12px;
  border-radius: 999px;
}

/* Tighten bottom spacing */
.comment-form .composer + .error-text {
  margin-top: 8px;
}


/* Hide send text on small screens (Telegram-like) */
@media (max-width: 520px) {
  .comment-form .send-text { display: none; }
}



